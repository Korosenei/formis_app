<aside class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <div class="logo" id="logo">
      <i class="fas fa-graduation-cap"></i>
      <span class="logo-text">FORMIS</span>
    </div>
    <button class="sidebar-toggle" id="sidebarToggle">
      <i class="fas fa-bars"></i>
    </button>
  </div>

  <nav class="sidebar-nav">
    <!-- SUPERADMIN MENU -->
    {% if user.role == 'SUPERADMIN' %}
    <ul class="nav-menu">
      <li class="nav-item">
        <a href="{% url 'dashboard:superadmin' %}" class="nav-link {% if request.resolver_match.url_name == 'superadmin' %}active{% endif %}">
          <i class="fas fa-tachometer-alt"></i>
          <span class="nav-text">Tableau de bord</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'establishments:etablissement_list' %}" class="nav-link">
          <i class="fas fa-building"></i>
          <span class="nav-text">Établissements</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'establishments:type_etablissement_list' %}" class="nav-link">
          <i class="fas fa-university"></i>
          <span class="nav-text">Types d'établissements</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'establishments:localite_list' %}" class="nav-link">
          <i class="fas fa-map-marker-alt"></i>
          <span class="nav-text">Localités</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:superadmin_users' %}" class="nav-link">
          <i class="fas fa-users"></i>
          <span class="nav-text">Tous les utilisateurs</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:superadmin_admins' %}" class="nav-link">
          <i class="fas fa-user-shield"></i>
          <span class="nav-text">Administrateurs</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:superadmin_teachers' %}" class="nav-link">
          <i class="fas fa-chalkboard-teacher"></i>
          <span class="nav-text">Enseignants</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:superadmin_students' %}" class="nav-link">
          <i class="fas fa-user-graduate"></i>
          <span class="nav-text">Apprenants</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:superadmin_statistics' %}" class="nav-link">
          <i class="fas fa-chart-bar"></i>
          <span class="nav-text">Statistiques globales</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:superadmin_reports' %}" class="nav-link">
          <i class="fas fa-file-chart-line"></i>
          <span class="nav-text">Rapports</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:superadmin_system_settings' %}" class="nav-link">
          <i class="fas fa-cogs"></i>
          <span class="nav-text">Paramètres système</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:superadmin_backups' %}" class="nav-link">
          <i class="fas fa-database"></i>
          <span class="nav-text">Sauvegardes</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:superadmin_logs' %}" class="nav-link">
          <i class="fas fa-clipboard-list"></i>
          <span class="nav-text">Journaux système</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:superadmin_support' %}" class="nav-link">
          <i class="fas fa-life-ring"></i>
          <span class="nav-text">Support</span>
        </a>
      </li>
    </ul>

    <!-- ADMIN ÉTABLISSEMENT MENU -->
    {% elif user.role == 'ADMIN' %}
    <ul class="nav-menu">
      <li class="nav-item">
        <a href="{% url 'dashboard:admin' %}" class="nav-link {% if request.resolver_match.url_name == 'admin' %}active{% endif %}">
          <i class="fas fa-tachometer-alt"></i>
          <span class="nav-text">Tableau de bord</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_users' %}" class="nav-link">
          <i class="fas fa-users"></i>
          <span class="nav-text">Tous les utilisateurs</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_students' %}" class="nav-link">
          <i class="fas fa-user-graduate"></i>
          <span class="nav-text">Apprenants</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_teachers' %}" class="nav-link">
          <i class="fas fa-chalkboard-teacher"></i>
          <span class="nav-text">Enseignants</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'academic:departement_list' %}" class="nav-link">
          <i class="fas fa-sitemap"></i>
          <span class="nav-text">Départements</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'academic:filiere_list' %}" class="nav-link">
          <i class="fas fa-network-wired"></i>
          <span class="nav-text">Filières</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'academic:niveau_list' %}" class="nav-link">
          <i class="fas fa-layer-group"></i>
          <span class="nav-text">Niveaux</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'academic:classe_list' %}" class="nav-link">
          <i class="fas fa-door-open"></i>
          <span class="nav-text">Classes</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_candidatures' %}" class="nav-link">
          <i class="fas fa-user-plus"></i>
          <span class="nav-text">Candidatures</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_courses' %}" class="nav-link">
          <i class="fas fa-book"></i>
          <span class="nav-text">Tous les cours</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'courses:module_list' %}" class="nav-link">
          <i class="fas fa-cubes"></i>
          <span class="nav-text">Modules</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'courses:matiere_list' %}" class="nav-link">
          <i class="fas fa-book-open"></i>
          <span class="nav-text">Matières</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'courses:emploi_du_temps_list' %}" class="nav-link">
          <i class="fas fa-calendar-alt"></i>
          <span class="nav-text">Emplois du temps</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#admin_evaluations" class="nav-link">
          <i class="fas fa-tasks"></i>
          <span class="nav-text">Évaluations</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_payments' %}" class="nav-link">
          <i class="fas fa-credit-card"></i>
          <span class="nav-text">Paiements</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'establishments:salle_list' %}" class="nav-link">
          <i class="fas fa-door-closed"></i>
          <span class="nav-text">Salles</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'establishments:campus_list' %}" class="nav-link">
          <i class="fas fa-university"></i>
          <span class="nav-text">Campus</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_settings' %}" class="nav-link">
          <i class="fas fa-cog"></i>
          <span class="nav-text">Paramètres généraux</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'establishments:annee_academique_list' %}" class="nav-link">
          <i class="fas fa-calendar"></i>
          <span class="nav-text">Années académiques</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_reports' %}" class="nav-link">
          <i class="fas fa-chart-line"></i>
          <span class="nav-text">Rapports</span>
        </a>
      </li>
    </ul>

    <!-- CHEF DE DÉPARTEMENT MENU -->
    {% elif user.role == 'CHEF_DEPARTEMENT' %}
    <ul class="nav-menu">
      <li class="nav-item">
        <a href="{% url 'dashboard:department_head' %}" class="nav-link {% if request.resolver_match.url_name == 'department_head' %}active{% endif %}">
          <i class="fas fa-tachometer-alt"></i>
          <span class="nav-text">Tableau de bord</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:department_head_teachers' %}" class="nav-link">
          <i class="fas fa-chalkboard-teacher"></i>
          <span class="nav-text">Mes enseignants</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:department_head_students' %}" class="nav-link">
          <i class="fas fa-users"></i>
          <span class="nav-text">Mes apprenants</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:department_head_courses' %}" class="nav-link">
          <i class="fas fa-book"></i>
          <span class="nav-text">Cours du département</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:department_head_candidatures' %}" class="nav-link">
          <i class="fas fa-user-plus"></i>
          <span class="nav-text">Candidatures</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:department_head_evaluations' %}" class="nav-link">
          <i class="fas fa-tasks"></i>
          <span class="nav-text">Évaluations</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:department_head_reports' %}" class="nav-link">
          <i class="fas fa-chart-line"></i>
          <span class="nav-text">Rapports</span>
        </a>
      </li>
    </ul>

    <!-- ENSEIGNANT MENU -->
    {% elif user.role == 'ENSEIGNANT' %}
    <ul class="nav-menu">
      <li class="nav-item">
        <a href="{% url 'dashboard:teacher' %}" class="nav-link {% if request.resolver_match.url_name == 'teacher' %}active{% endif %}">
          <i class="fas fa-tachometer-alt"></i>
          <span class="nav-text">Tableau de bord</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:teacher_courses' %}" class="nav-link">
          <i class="fas fa-chalkboard-teacher"></i>
          <span class="nav-text">Mes Enseignements</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:teacher_schedule' %}" class="nav-link">
          <i class="fas fa-calendar-alt"></i>
          <span class="nav-text">Emploi du temps</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:teacher_logbook' %}" class="nav-link">
          <i class="fas fa-book-open"></i>
          <span class="nav-text">Cahier de textes</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:teacher_evaluations' %}" class="nav-link">
          <i class="fas fa-edit"></i>
          <span class="nav-text">Évaluations</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:teacher_attendance' %}" class="nav-link">
          <i class="fas fa-user-check"></i>
          <span class="nav-text">Présences</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:teacher_students' %}" class="nav-link">
          <i class="fas fa-users"></i>
          <span class="nav-text">Mes Étudiants</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:teacher_resources' %}" class="nav-link">
          <i class="fas fa-folder-open"></i>
          <span class="nav-text">Ressources</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:teacher_reports' %}" class="nav-link">
          <i class="fas fa-chart-line"></i>
          <span class="nav-text">Rapports</span>
        </a>
      </li>
    </ul>

    <!-- APPRENANT MENU -->
    {% elif user.role == 'APPRENANT' %}
    <ul class="nav-menu">
      <li class="nav-item">
        <a href="{% url 'dashboard:student' %}" class="nav-link {% if request.resolver_match.url_name == 'student' %}active{% endif %}">
          <i class="fas fa-tachometer-alt"></i>
          <span class="nav-text">Tableau de bord</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_courses' %}" class="nav-link">
          <i class="fas fa-book"></i>
          <span class="nav-text">Mes Cours</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_schedule' %}" class="nav-link">
          <i class="fas fa-calendar-alt"></i>
          <span class="nav-text">Emploi du temps</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_evaluations' %}" class="nav-link">
          <i class="fas fa-edit"></i>
          <span class="nav-text">Évaluations</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_resultats' %}" class="nav-link">
          <i class="fas fa-chart-line"></i>
          <span class="nav-text">Notes & Résultats</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_attendances' %}" class="nav-link">
          <i class="fas fa-user-check"></i>
          <span class="nav-text">Présences</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_paiements' %}" class="nav-link">
          <i class="fas fa-credit-card"></i>
          <span class="nav-text">Paiements</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_resources' %}" class="nav-link">
          <i class="fas fa-folder-open"></i>
          <span class="nav-text">Ressources</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_documents' %}" class="nav-link">
          <i class="fas fa-file-alt"></i>
          <span class="nav-text">Documents</span>
        </a>
      </li>
    </ul>
    {% endif %}
  </nav>

  <div class="sidebar-footer">
    <div class="user-info">
      {% if user.photo_profil %}
      <div class="user-avatar">
        <img src="{{ user.photo_profil.url }}" alt="{{ user.get_full_name }}" />
      </div>
      {% else %}
      <div class="user-avatar">
        <i class="fas fa-user-circle"></i>
      </div>
      {% endif %}
      <div class="user-details">
        <span class="user-name">{{ user.get_full_name }}</span>
        <span class="user-matricule">{{ user.matricule }}</span>
      </div>
    </div>
  </div>
</aside>

<style>
  .sidebar-footer {
    padding: 15px;
    border-top: 1px solid #e1e5eb;
    background-color: #f8f9fa;
  }

  .user-info {
    display: flex;
    align-items: center;
  }

  .user-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #4e73df;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 12px;
    flex-shrink: 0;
  }

  .user-avatar img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
  }

  .user-avatar i {
    font-size: 20px;
  }

  .user-details {
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .user-name {
    font-weight: 600;
    font-size: 14px;
    color: #333;
  }

  .user-matricule {
    font-size: 12px;
    color: #666;
  }
</style>