<!-- templates/components/sidebar.html -->
<aside class="sidebar" id="sidebar" data-user-role="{{ user.role }}">
  <div class="sidebar-header">
    <div class="logo" id="logo">
      <i class="fas fa-graduation-cap"></i>
      <span class="logo-text">FORMIS</span>
    </div>
    <button class="sidebar-toggle" id="sidebarToggle">
      <i class="fas fa-bars"></i>
    </button>
  </div>

  <nav class="sidebar-nav">
    <!-- SUPERADMIN MENU -->
    {% if user.role == 'SUPERADMIN' %}
    <ul class="nav-menu">
      <li class="nav-item">
        <a href="{% url 'dashboard:superadmin' %}"
           class="nav-link"
           data-url-key="/dashboard/superadmin/">
          <i class="fas fa-tachometer-alt"></i>
          <span class="nav-text">Tableau de bord</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'establishments:etablissement_list' %}"
           class="nav-link"
           data-url-key="/establishments/etablissement/">
          <i class="fas fa-building"></i>
          <span class="nav-text">Établissements</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'establishments:type_etablissement_list' %}"
           class="nav-link"
           data-url-key="/establishments/type-etablissement/">
          <i class="fas fa-university"></i>
          <span class="nav-text">Types d'établissements</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'establishments:localite_list' %}"
           class="nav-link"
           data-url-key="/establishments/localite/">
          <i class="fas fa-map-marker-alt"></i>
          <span class="nav-text">Localités</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/superadmin/users/"
           data-status="disabled">
          <i class="fas fa-users"></i>
          <span class="nav-text">Utilisateurs</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/superadmin/statistics/"
           data-status="disabled">
          <i class="fas fa-chart-bar"></i>
          <span class="nav-text">Statistiques</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/superadmin/reports/"
           data-status="disabled">
          <i class="fas fa-file-chart-line"></i>
          <span class="nav-text">Rapports</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/superadmin/system-settings/"
           data-status="disabled">
          <i class="fas fa-cogs"></i>
          <span class="nav-text">Paramètres</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/superadmin/backups/"
           data-status="disabled">
          <i class="fas fa-database"></i>
          <span class="nav-text">Sauvegardes</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/superadmin/logs/"
           data-status="disabled">
          <i class="fas fa-clipboard-list"></i>
          <span class="nav-text">Journaux système</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/superadmin/support/"
           data-status="disabled">
          <i class="fas fa-life-ring"></i>
          <span class="nav-text">Support</span>
        </a>
      </li>
    </ul>

    <!-- ADMIN ÉTABLISSEMENT MENU -->
    {% elif user.role == 'ADMIN' %}
    <ul class="nav-menu">
      <li class="nav-item">
        <a href="{% url 'dashboard:admin' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/">
          <i class="fas fa-tachometer-alt"></i>
          <span class="nav-text">Tableau de bord</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_users' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/users/">
          <i class="fas fa-users"></i>
          <span class="nav-text">Utilisateurs</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_teachers' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/teachers/">
          <i class="fas fa-chalkboard-teacher"></i>
          <span class="nav-text">Enseignants</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_students' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/students/">
          <i class="fas fa-user-graduate"></i>
          <span class="nav-text">Apprenants</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_candidatures' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/candidatures/">
          <i class="fas fa-user-plus"></i>
          <span class="nav-text">Candidatures</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_inscriptions' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/inscriptions/">
          <i class="fas fa-id-card"></i>
          <span class="nav-text">Inscriptions</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_paiements' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/payments/">
          <i class="fas fa-credit-card"></i>
          <span class="nav-text">Paiements</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_departments' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/departments/">
          <i class="fas fa-sitemap"></i>
          <span class="nav-text">Départements</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_filieres' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/filieres/">
          <i class="fas fa-network-wired"></i>
          <span class="nav-text">Filières</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_niveaux' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/niveaux/">
          <i class="fas fa-layer-group"></i>
          <span class="nav-text">Niveaux</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_classes' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/classes/">
          <i class="fas fa-door-open"></i>
          <span class="nav-text">Classes</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_modules' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/module/">
          <i class="fas fa-cubes"></i>
          <span class="nav-text">Modules</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_matieres' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/matieres/">
          <i class="fas fa-book-open"></i>
          <span class="nav-text">Matières</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_courses' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/courses/">
          <i class="fas fa-book"></i>
          <span class="nav-text">Tous les cours</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_evaluations' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/evaluations/">
          <i class="fas fa-tasks"></i>
          <span class="nav-text">Évaluations</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_programmes' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/programmes/">
          <i class="fas fa-calendar-alt"></i>
          <span class="nav-text">Emplois du temps</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_salles' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/salle/">
          <i class="fas fa-door-closed"></i>
          <span class="nav-text">Salles</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'establishments:campus_list' %}"
           class="nav-link"
           data-url-key="/establishments/campus/"
           data-status="disabled">
          <i class="fas fa-university"></i>
          <span class="nav-text">Campus</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_reports' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/reports/"
           data-status="disabled">
          <i class="fas fa-chart-line"></i>
          <span class="nav-text">Rapports</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:admin_settings' %}"
           class="nav-link"
           data-url-key="/dashboard/admin/settings/"
           data-status="disabled">
          <i class="fas fa-cog"></i>
          <span class="nav-text">Paramètres</span>
        </a>
      </li>
    </ul>

    <!-- CHEF DE DÉPARTEMENT MENU -->
    {% elif user.role == 'CHEF_DEPARTEMENT' %}
    <ul class="nav-menu">
      <li class="nav-item">
        <a href="{% url 'dashboard:department_head' %}"
           class="nav-link"
           data-url-key="/dashboard/department-head/">
          <i class="fas fa-tachometer-alt"></i>
          <span class="nav-text">Tableau de bord</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:department_head_teachers' %}"
           class="nav-link"
           data-url-key="/dashboard/department-head/teachers/">
          <i class="fas fa-chalkboard-teacher"></i>
          <span class="nav-text">Enseignants</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:department_head_students' %}"
           class="nav-link"
           data-url-key="/dashboard/department-head/students/">
          <i class="fas fa-users"></i>
          <span class="nav-text">Apprenants</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/department-head/candidatures/"
           data-status="disabled">
          <i class="fas fa-user-plus"></i>
          <span class="nav-text">Candidatures</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/department-head/inscriptions/"
           data-status="disabled">
          <i class="fas fa-id-card"></i>
          <span class="nav-text">Inscriptions</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/department-head/payments/"
           data-status="disabled">
          <i class="fas fa-credit-card"></i>
          <span class="nav-text">Paiements</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/department-head/filieres/"
           data-status="disabled">
          <i class="fas fa-network-wired"></i>
          <span class="nav-text">Filières</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/department-head/niveaux/"
           data-status="disabled">
          <i class="fas fa-layer-group"></i>
          <span class="nav-text">Niveaux</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/department-head/classes/"
           data-status="disabled">
          <i class="fas fa-door-open"></i>
          <span class="nav-text">Classes</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/department-head/module/"
           data-status="disabled">
          <i class="fas fa-cubes"></i>
          <span class="nav-text">Modules</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/department-head/matieres/"
           data-status="disabled">
          <i class="fas fa-book-open"></i>
          <span class="nav-text">Matières</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:department_head_courses' %}"
           class="nav-link"
           data-url-key="/dashboard/department-head/courses/">
          <i class="fas fa-book"></i>
          <span class="nav-text">Cours du département</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/department-head/logbook/"
           data-status="disabled">
          <i class="fas fa-book-open"></i>
          <span class="nav-text">Cahier de textes</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:department_head_evaluations' %}"
           class="nav-link"
           data-url-key="/dashboard/department-head/evaluations/">
          <i class="fas fa-tasks"></i>
          <span class="nav-text">Évaluations</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/department-head/programmes/">
          <i class="fas fa-calendar-alt"></i>
          <span class="nav-text">Emplois du temps</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:department_head_reports' %}"
           class="nav-link"
           data-url-key="/dashboard/department-head/reports/">
          <i class="fas fa-chart-line"></i>
          <span class="nav-text">Rapports</span>
        </a>
      </li>
    </ul>

    <!-- ENSEIGNANT MENU -->
    {% elif user.role == 'ENSEIGNANT' %}
    <ul class="nav-menu">
      <li class="nav-item">
        <a href="{% url 'dashboard:teacher' %}"
           class="nav-link"
           data-url-key="/dashboard/teacher/">
          <i class="fas fa-tachometer-alt"></i>
          <span class="nav-text">Tableau de bord</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:teacher_courses' %}"
           class="nav-link"
           data-url-key="/dashboard/teacher/courses/">
          <i class="fas fa-chalkboard-teacher"></i>
          <span class="nav-text">Mes Enseignements</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/teacher/logbook/"
           data-status="disabled">
          <i class="fas fa-book-open"></i>
          <span class="nav-text">Cahier de textes</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/teacher/evaluations/"
           data-status="disabled">
          <i class="fas fa-edit"></i>
          <span class="nav-text">Évaluations</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/teacher/grades/"
           data-status="disabled">
          <i class="fas fa-chart-bar"></i>
          <span class="nav-text">Notes & Corrections</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/teacher/attendance/"
           data-status="disabled">
          <i class="fas fa-user-check"></i>
          <span class="nav-text">Présences</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/teacher/students/"
           data-status="disabled">
          <i class="fas fa-users"></i>
          <span class="nav-text">Mes Étudiants</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/teacher/schedule/"
           data-status="disabled">
          <i class="fas fa-calendar-alt"></i>
          <span class="nav-text">Emploi du temps</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/teacher/resources/"
           data-status="disabled">
          <i class="fas fa-folder-open"></i>
          <span class="nav-text">Ressources</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/teacher/reports/"
           data-status="disabled">
          <i class="fas fa-chart-line"></i>
          <span class="nav-text">Rapports</span>
        </a>
      </li>
    </ul>

    <!-- APPRENANT MENU -->
    {% elif user.role == 'APPRENANT' %}
    <ul class="nav-menu">
      <li class="nav-item">
        <a href="{% url 'dashboard:student' %}"
           class="nav-link"
           data-url-key="/dashboard/student/">
          <i class="fas fa-tachometer-alt"></i>
          <span class="nav-text">Tableau de bord</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_courses' %}"
           class="nav-link"
           data-url-key="/dashboard/student/courses/">
          <i class="fas fa-book"></i>
          <span class="nav-text">Mes Cours</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_schedule' %}"
           class="nav-link"
           data-url-key="/dashboard/student/schedule/">
          <i class="fas fa-calendar-alt"></i>
          <span class="nav-text">Emploi du temps</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_evaluations' %}"
           class="nav-link"
           data-url-key="/dashboard/student/evaluations/">
          <i class="fas fa-edit"></i>
          <span class="nav-text">Évaluations</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_resultats' %}"
           class="nav-link"
           data-url-key="/dashboard/student/results/">
          <i class="fas fa-chart-line"></i>
          <span class="nav-text">Notes & Résultats</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_attendances' %}"
           class="nav-link"
           data-url-key="/dashboard/student/attendances/">
          <i class="fas fa-user-check"></i>
          <span class="nav-text">Présences</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/student/candidatures/"
           data-status="disabled">
          <i class="fas fa-user-plus"></i>
          <span class="nav-text">Candidatures</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/student/inscriptions/"
           data-status="disabled">
          <i class="fas fa-id-card"></i>
          <span class="nav-text">Inscriptions</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_paiements' %}"
           class="nav-link"
           data-url-key="/dashboard/student/payments/">
          <i class="fas fa-credit-card"></i>
          <span class="nav-text">Paiements</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_resources' %}"
           class="nav-link"
           data-url-key="/dashboard/student/resources/">
          <i class="fas fa-folder-open"></i>
          <span class="nav-text">Ressources</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="{% url 'dashboard:student_documents' %}"
           class="nav-link"
           data-url-key="/dashboard/student/documents/">
          <i class="fas fa-file-alt"></i>
          <span class="nav-text">Documents</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#"
           class="nav-link"
           data-url-key="/dashboard/student/profile/"
           data-status="disabled">
          <i class="fas fa-user"></i>
          <span class="nav-text">Profil</span>
        </a>
      </li>
    </ul>
    {% endif %}
  </nav>

  <div class="sidebar-footer">
    <div class="user-info">
      {% if user.photo_profil %}
      <div class="user-avatar">
        <img src="{{ user.photo_profil.url }}" alt="{{ user.get_full_name }}" />
      </div>
      {% else %}
      <div class="user-avatar">
        <i class="fas fa-user-circle"></i>
      </div>
      {% endif %}
      <div class="user-details">
        <span class="user-name">{{ user.get_full_name }}</span>
        <span class="user-matricule">{{ user.matricule }}</span>
      </div>
    </div>
  </div>
</aside>

<!-- CSS pour améliorer l'apparence -->
<style>
  .sidebar-footer {
    padding: 15px;
    border-top: 1px solid #e1e5eb;
    background-color: #f8f9fa;
  }

  .user-info {
    display: flex;
    align-items: center;
  }

  .user-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #4e73df;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 12px;
    flex-shrink: 0;
  }

  .user-avatar img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
  }

  .user-avatar i {
    font-size: 20px;
  }

  .user-details {
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .user-name {
    font-weight: 600;
    color: #2c3e50;
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .user-matricule {
    color: #6c757d;
    font-size: 12px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Styles pour les liens désactivés */
  .nav-link[data-status="disabled"] {
    opacity: 0.6;
    position: relative;
  }

  .nav-link[data-status="disabled"]::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: transparent;
  }

  /* Animation pour les transitions */
  .nav-link {
    transition: all 0.2s ease;
  }

  .nav-link:hover:not([data-status="disabled"]) {
    background-color: rgba(78, 115, 223, 0.1);
    transform: translateX(2px);
  }

  .nav-link.active {
    background-color: #4e73df;
    color: white;
    border-radius: 0 20px 20px 0;
    margin-right: 10px;
  }

  .nav-link.active i,
  .nav-link.active .nav-text {
    color: white;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .sidebar {
      transform: translateX(-100%);
      transition: transform 0.3s ease;
    }

    .sidebar.mobile-open {
      transform: translateX(0);
    }
  }
</style>