{% load static %}

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nouvelle Candidature - Système de Gestion Académique</title>
    <link rel="stylesheet" href="{% static 'css/candidature/candidature.css' %}">
</head>
<body>
    <div class="container">
        <!-- En-tête -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none">
                        <path d="M12 14l9-5-9-5-9 5 9 5z" fill="currentColor"/>
                        <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" fill="currentColor"/>
                    </svg>
                    <span class="logo-text">AcademiPro</span>
                </div>
                <h1 class="page-title">Nouvelle Candidature</h1>
            </div>
        </header>

        <!-- Barre de progression -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-step active" data-step="1">
                    <span class="step-number">1</span>
                    <span class="step-label">Formation</span>
                </div>
                <div class="progress-step" data-step="2">
                    <span class="step-number">2</span>
                    <span class="step-label">Informations</span>
                </div>
                <div class="progress-step" data-step="3">
                    <span class="step-number">3</span>
                    <span class="step-label">Documents</span>
                </div>
                <div class="progress-step" data-step="4">
                    <span class="step-number">4</span>
                    <span class="step-label">Validation</span>
                </div>
            </div>
        </div>

        <!-- Messages d'erreur/succès -->
        <div id="message-container" class="message-container"></div>

        <!-- Formulaire -->
        <form id="candidature-form" class="candidature-form" novalidate>
            <!-- Étape 1: Informations sur la formation -->
            <div class="form-step active" id="step-1">
                <div class="step-header">
                    <h2>Choix de la Formation</h2>
                    <p>Sélectionnez l'établissement, la filière et le niveau souhaités</p>
                </div>

                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="etablissement" class="form-label required">Établissement</label>
                            <select id="etablissement" name="etablissement" class="form-select" required>
                                <option value="">Sélectionnez un établissement</option>
                                <option value="1">Université de Ouagadougou</option>
                                <option value="2">École Supérieure de Commerce</option>
                                <option value="3">Institut Polytechnique</option>
                            </select>
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="annee_academique" class="form-label required">Année académique</label>
                            <select id="annee_academique" name="annee_academique" class="form-select" required>
                                <option value="">Sélectionnez l'année</option>
                                <option value="2024-2025">2024-2025</option>
                                <option value="2025-2026">2025-2026</option>
                            </select>
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="departement" class="form-label required">Département</label>
                            <select id="departement" name="departement" class="form-select" required disabled>
                                <option value="">Sélectionnez d'abord un établissement</option>
                            </select>
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="filiere" class="form-label required">Filière</label>
                            <select id="filiere" name="filiere" class="form-select" required disabled>
                                <option value="">Sélectionnez d'abord un département</option>
                            </select>
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="niveau" class="form-label required">Niveau</label>
                            <select id="niveau" name="niveau" class="form-select" required disabled>
                                <option value="">Sélectionnez d'abord une filière</option>
                            </select>
                            <div class="form-error"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Étape 2: Informations personnelles -->
            <div class="form-step" id="step-2">
                <div class="step-header">
                    <h2>Informations Personnelles</h2>
                    <p>Renseignez vos informations personnelles et de contact</p>
                </div>

                <!-- Informations de base -->
                <div class="form-section">
                    <h3 class="section-title">Identité</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="prenom" class="form-label required">Prénom(s)</label>
                            <input type="text" id="prenom" name="prenom" class="form-input" required>
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="nom" class="form-label required">Nom de famille</label>
                            <input type="text" id="nom" name="nom" class="form-input" required>
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="date_naissance" class="form-label required">Date de naissance</label>
                            <input type="date" id="date_naissance" name="date_naissance" class="form-input" required>
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="lieu_naissance" class="form-label required">Lieu de naissance</label>
                            <input type="text" id="lieu_naissance" name="lieu_naissance" class="form-input" required>
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="genre" class="form-label required">Genre</label>
                            <select id="genre" name="genre" class="form-select" required>
                                <option value="">Sélectionnez</option>
                                <option value="M">Masculin</option>
                                <option value="F">Féminin</option>
                            </select>
                            <div class="form-error"></div>
                        </div>
                    </div>
                </div>

                <!-- Contact -->
                <div class="form-section">
                    <h3 class="section-title">Contact</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="telephone" class="form-label required">Téléphone</label>
                            <input type="tel" id="telephone" name="telephone" class="form-input" placeholder="+226 XX XX XX XX" required>
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="email" class="form-label required">Email</label>
                            <input type="email" id="email" name="email" class="form-input" placeholder="email@exemple.com" required>
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group form-group-full">
                            <label for="adresse" class="form-label required">Adresse complète</label>
                            <textarea id="adresse" name="adresse" class="form-textarea" rows="3" required></textarea>
                            <div class="form-error"></div>
                        </div>
                    </div>
                </div>

                <!-- Informations parentales -->
                <div class="form-section">
                    <h3 class="section-title">Informations des parents/tuteur</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="nom_pere" class="form-label">Nom du père</label>
                            <input type="text" id="nom_pere" name="nom_pere" class="form-input">
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="telephone_pere" class="form-label">Téléphone du père</label>
                            <input type="tel" id="telephone_pere" name="telephone_pere" class="form-input">
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="nom_mere" class="form-label">Nom de la mère</label>
                            <input type="text" id="nom_mere" name="nom_mere" class="form-input">
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="telephone_mere" class="form-label">Téléphone de la mère</label>
                            <input type="tel" id="telephone_mere" name="telephone_mere" class="form-input">
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="nom_tuteur" class="form-label">Nom du tuteur</label>
                            <input type="text" id="nom_tuteur" name="nom_tuteur" class="form-input">
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="telephone_tuteur" class="form-label">Téléphone du tuteur</label>
                            <input type="tel" id="telephone_tuteur" name="telephone_tuteur" class="form-input">
                            <div class="form-error"></div>
                        </div>
                    </div>
                </div>

                <!-- Informations académiques -->
                <div class="form-section">
                    <h3 class="section-title">Parcours académique</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="ecole_precedente" class="form-label">École précédente</label>
                            <input type="text" id="ecole_precedente" name="ecole_precedente" class="form-input">
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="dernier_diplome" class="form-label">Dernier diplôme</label>
                            <input type="text" id="dernier_diplome" name="dernier_diplome" class="form-input" placeholder="Ex: Baccalauréat série C">
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="annee_obtention" class="form-label">Année d'obtention</label>
                            <input type="number" id="annee_obtention" name="annee_obtention" class="form-input" min="1950" max="2024">
                            <div class="form-error"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Étape 3: Documents -->
            <div class="form-step" id="step-3">
                <div class="step-header">
                    <h2>Documents Requis</h2>
                    <p>Téléchargez les documents nécessaires pour votre candidature</p>
                </div>

                <div class="documents-info">
                    <div class="info-card">
                        <div class="info-icon">ℹ️</div>
                        <div class="info-content">
                            <h4>Instructions importantes</h4>
                            <ul>
                                <li>Les documents marqués d'un astérisque (*) sont obligatoires</li>
                                <li>Formats acceptés : PDF, JPG, PNG (max 5MB par fichier)</li>
                                <li>Assurez-vous que vos documents sont lisibles et de bonne qualité</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div id="documents-container" class="documents-container">
                    <!-- Les documents requis seront chargés dynamiquement ici -->
                </div>
            </div>

            <!-- Étape 4: Validation -->
            <div class="form-step" id="step-4">
                <div class="step-header">
                    <h2>Validation de la Candidature</h2>
                    <p>Vérifiez vos informations avant de soumettre votre candidature</p>
                </div>

                <div id="summary-container" class="summary-container">
                    <!-- Le récapitulatif sera généré dynamiquement ici -->
                </div>

                <div class="form-section">
                    <div class="checkbox-group">
                        <input type="checkbox" id="terms" name="terms" required>
                        <label for="terms" class="checkbox-label">
                            J'ai lu et j'accepte les <a href="#" class="link">conditions générales</a> et la 
                            <a href="#" class="link">politique de confidentialité</a>
                        </label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="data_consent" name="data_consent" required>
                        <label for="data_consent" class="checkbox-label">
                            J'autorise le traitement de mes données personnelles dans le cadre de ma candidature
                        </label>
                    </div>
                </div>
            </div>

            <!-- Boutons de navigation -->
            <div class="form-actions">
                <button type="button" id="prev-btn" class="btn btn-secondary" style="display: none;">
                    <span class="btn-icon">←</span>
                    Précédent
                </button>
                
                <div class="actions-right">
                    <button type="button" id="save-draft-btn" class="btn btn-outline">
                        <span class="btn-icon">💾</span>
                        Sauvegarder brouillon
                    </button>
                    
                    <button type="button" id="next-btn" class="btn btn-primary">
                        Suivant
                        <span class="btn-icon">→</span>
                    </button>
                    
                    <button type="submit" id="submit-btn" class="btn btn-success" style="display: none;">
                        <span class="btn-icon">✓</span>
                        Soumettre candidature
                    </button>
                </div>
            </div>
        </form>

        <!-- Loading overlay -->
        <div id="loading-overlay" class="loading-overlay">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <p>Traitement en cours...</p>
            </div>
        </div>
    </div>

    <script src="{% static 'js/candidature/candidature.js' %}"></script>
</body>
</html>