<!-- templates/enrollment/inscription/success_public.html -->
{% extends 'base.html' %}
{% load static %}

{% block title %}Inscription r√©ussie{% endblock %}

{% block extra_css %}
<style>
    .success-container {
        max-width: 800px;
        margin: 50px auto;
    }

    .success-icon {
        font-size: 80px;
        color: #28a745;
        animation: pulse 1.5s ease-in-out infinite;
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

    .info-card {
        background: #f8f9fa;
        border-left: 4px solid #28a745;
        padding: 20px;
        margin: 20px 0;
    }

    .credentials-box {
        background: #fff3cd;
        border: 2px dashed #ffc107;
        padding: 20px;
        margin: 20px 0;
        border-radius: 10px;
    }

    .btn-dashboard {
        padding: 15px 40px;
        font-size: 18px;
    }
</style>
{% endblock %}

{% block content %}
<div class="container success-container">
    <div class="text-center">
        <div class="success-icon">
            <i class="fas fa-check-circle"></i>
        </div>

        <h1 class="display-4 text-success mb-4">
            üéâ F√©licitations !
        </h1>

        <p class="lead">
            Votre inscription a √©t√© confirm√©e avec succ√®s.
        </p>
    </div>

    <!-- Informations de l'inscription -->
    <div class="info-card">
        <h4>üìã Informations de votre inscription</h4>
        <hr>
        <div class="row">
            <div class="col-md-6">
                <p><strong>Nom complet:</strong> {{ candidature.prenom }} {{ candidature.nom }}</p>
                <p><strong>Email:</strong> {{ candidature.email }}</p>
                <p><strong>Num√©ro d'inscription:</strong> {{ inscription.numero_inscription }}</p>
            </div>
            <div class="col-md-6">
                <p><strong>Formation:</strong> {{ candidature.filiere.nom }}</p>
                <p><strong>Niveau:</strong> {{ candidature.niveau.nom }}</p>
                <p><strong>√âtablissement:</strong> {{ candidature.etablissement.nom }}</p>
            </div>
        </div>
    </div>

    <!-- Paiement confirm√© -->
    <div class="info-card">
        <h4>üí≥ Paiement confirm√©</h4>
        <hr>
        <div class="row">
            <div class="col-md-6">
                <p><strong>Num√©ro de transaction:</strong> {{ paiement.numero_transaction }}</p>
                <p><strong>Montant pay√©:</strong> {{ paiement.montant }} FCFA</p>
            </div>
            <div class="col-md-6">
                <p><strong>Date:</strong> {{ paiement.date_confirmation|date:"d/m/Y H:i" }}</p>
                <p><strong>Statut:</strong> <span class="badge bg-success">Confirm√©</span></p>
            </div>
        </div>
    </div>

    <!-- Identifiants de connexion -->
    {% if user %}
    <div class="credentials-box">
        <h4 class="text-warning">
            <i class="fas fa-key"></i> Vos identifiants de connexion
        </h4>
        <hr>
        <div class="alert alert-warning">
            <strong>‚ö†Ô∏è IMPORTANT:</strong> Un email contenant vos identifiants de connexion
            a √©t√© envoy√© √† <strong>{{ user.email }}</strong>
        </div>

        <div class="row">
            <div class="col-md-6">
                <p><strong>üìß Email de connexion:</strong><br>
                   <code class="fs-5">{{ user.email }}</code>
                </p>
            </div>
            <div class="col-md-6">
                <p><strong>üé´ Matricule:</strong><br>
                   <code class="fs-5">{{ user.matricule }}</code>
                </p>
            </div>
        </div>

        <p class="mb-0 text-muted">
            <i class="fas fa-info-circle"></i>
            V√©rifiez votre bo√Æte email (et les spams) pour r√©cup√©rer votre mot de passe temporaire.
        </p>
    </div>
    {% endif %}

    <!-- Prochaines √©tapes -->
    <div class="card mt-4">
        <div class="card-body">
            <h5 class="card-title">
                <i class="fas fa-list-check"></i> Prochaines √©tapes
            </h5>
            <ol class="mt-3">
                <li class="mb-2">
                    <strong>V√©rifiez votre email</strong> pour r√©cup√©rer vos identifiants de connexion
                </li>
                <li class="mb-2">
                    <strong>Connectez-vous</strong> √† votre espace √©tudiant avec vos identifiants
                </li>
                <li class="mb-2">
                    <strong>Changez votre mot de passe</strong> temporaire lors de votre premi√®re connexion
                </li>
                <li class="mb-2">
                    <strong>Compl√©tez votre profil</strong> avec vos informations personnelles
                </li>
                <li class="mb-2">
                    <strong>Consultez votre emploi du temps</strong> et vos cours
                </li>
            </ol>
        </div>
    </div>

    <!-- Boutons d'action -->
    <div class="text-center mt-4 mb-5">
        <a href="{% url 'accounts:login' %}" class="btn btn-success btn-dashboard">
            <i class="fas fa-sign-in-alt"></i> Acc√©der √† mon espace √©tudiant
        </a>

        <p class="mt-3 text-muted">
            <i class="fas fa-envelope"></i>
            Un email de confirmation a √©t√© envoy√© √† {{ candidature.email }}
        </p>
    </div>

    <!-- Support -->
    <div class="alert alert-info">
        <h6><i class="fas fa-question-circle"></i> Besoin d'aide ?</h6>
        <p class="mb-0">
            Si vous rencontrez des difficult√©s pour vous connecter ou si vous n'avez pas re√ßu
            l'email avec vos identifiants, contactez le support de votre √©tablissement.
        </p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Auto-scroll vers le haut
window.scrollTo(0, 0);

// Confetti animation (optionnel)
document.addEventListener('DOMContentLoaded', function() {
    // Ajouter une petite animation de c√©l√©bration
    const successIcon = document.querySelector('.success-icon');

    setTimeout(() => {
        successIcon.style.transform = 'scale(1.2)';
        setTimeout(() => {
            successIcon.style.transform = 'scale(1)';
        }, 300);
    }, 500);
});
</script>
{% endblock %}